{% extends "core/faculty/sidebar.html" %}

{% block header %}

{% endblock %}

{% block body %}
<div class="d-flex align-items-center justify-content-between mb-4">
    <h1 class="h3"><strong> Real Time Attendance</strong></h1>
    <div class="input-group" style="width: 25%;">
        <input type="text" class="form-control" id="search-input" placeholder="Search.." aria-label="Search" aria-describedby="search-button" 
        style="margin-top: 15px;  
        border-color: black;" >
    </div>
</div>

<!-- Subject and Section Dropdowns -->
<div class="mb-3">
    <label for="subject-dropdown" class="form-label">Subject:</label>
    <select class="form-select" id="subject-dropdown">
        <!-- Populate this dropdown with subjects -->
        <option value="subject1">Subject 1</option>
        <option value="subject2">Subject 2</option>
        <!-- Add more options dynamically based on faculty's subjects -->
    </select>
</div>

<div class="mb-3">
    <label for="section-dropdown" class="form-label">Section:</label>
    <select class="form-select" id="section-dropdown">
        <!-- Populate this dropdown with sections -->
        <option value="sectionA">Section A</option>
        <option value="sectionB">Section B</option>
        <!-- Add more options dynamically based on faculty's sections -->
    </select>
</div>

<!-- Button to Link to Ongoing Class -->
<button type="button" class="btn btn-primary" id="ongoing-class-button">View Ongoing Class</button>

<h6><strong>Instructor: {{ current_user.first_name }} {{ current_user.last_name }}</strong></h6>
<h6 style="margin-top: 15px;"><strong>Subject: Your Subject Here</strong></h6>

<!-- For demonstration purposes -->
<table class="table datatables table-bordered table-condensed table-striped p-0 m-0">
    <thead>
        <tr>
            <th style="color: #800000;">Student Name</th>
            <th style="color: #800000;">Section</th>
            <th style="color: #800000;">Date & Time</th>
            <th style="color: #800000;">Status</th>
        </tr>
    </thead>
    <tbody>
        {% for i in range(15) %}
        <tr data-filter="{{ 'Student Name ' ~ i }}" class="row-to-filter">
            <td>{{ 'Student Name ' ~ i }}</td>
            <td>{{ 'Section ' ~ i }}</td>
            <td>{{ 'Date & Time ' ~ i }}</td>
            <td>{{ 'Status ' ~ i }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</div>

<script>
// Add logic here to handle dropdown selection and button click event
document.getElementById("ongoing-class-button").addEventListener("click", function () {
    // Retrieve selected subject and section from dropdowns
    var selectedSubject = document.getElementById("subject-dropdown").value;
    var selectedSection = document.getElementById("section-dropdown").value;

    // Construct the URL or perform any logic based on the selected subject and section
    var ongoingClassURL = "/ongoing_class?subject=" + selectedSubject + "&section=" + selectedSection;

    // Redirect to the ongoing class URL
    window.location.href = ongoingClassURL;
});

document.getElementById("search-input").addEventListener("input", function () {
    filterTable();
});

function filterTable() {
    const input = document.getElementById("search-input");
    const filter = input.value.toUpperCase();
    const rows = document.querySelectorAll(".row-to-filter");

    rows.forEach((row) => {
        const text = row.getAttribute("data-filter");
        if (text.toUpperCase().indexOf(filter) > -1) {
            row.style.display = "";
        } else {
            row.style.display = "none";
        }
    });
}
</script>
{% endblock %}
